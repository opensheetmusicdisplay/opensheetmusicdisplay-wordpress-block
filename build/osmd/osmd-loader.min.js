!function(e){var s={};function t(o){if(s[o])return s[o].exports;var i=s[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=s,t.d=function(e,s,o){t.o(e,s)||Object.defineProperty(e,s,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,s){if(1&s&&(e=t(e)),8&s)return e;if(4&s&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&s&&"string"!=typeof e)for(var i in e)t.d(o,i,function(s){return e[s]}.bind(null,i));return o},t.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(s,"a",s),s},t.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},t.p="",t(t.s=3)}([function(e,s){e.exports=window["opensheetmusicdisplay-wordpress-block"]},function(e,s){e.exports=opensheetmusicdisplay},,function(e,s,t){"use strict";t.r(s);var o=t(1),i=t(0);function n(e){let s=void 0;for(const t of e.getElementsByTagName("div"))if(t.id.startsWith("osmdCanvas")){s=t;break}return s}function l(e,s,t){const o=n(e),i=function(e){let s=e.getElementsByClassName("phonicscore-opensheetmusicdisplay__message-block")[0];if(!s){s=document.createElement("div"),s.classList.add("phonicscore-opensheetmusicdisplay__message-block");const t=document.createElement("h4");s.appendChild(t);const o=document.createElement("p");s.appendChild(o),e.appendChild(s)}return s}(e);i.getElementsByTagName("h4")[0].innerText=s;i.getElementsByTagName("p")[0].innerText=t,o&&o.remove()}const r=document.getElementsByClassName("phonicscore-opensheetmusicdisplay__placeholder");for(let e=0;e<r.length;e++){const s=r[e],t=s.getElementsByClassName("phonicscore-opensheetmusicdisplay__loading-spinner")[0];t.classList.remove("hide");const c=s.getElementsByClassName("phonicscore-opensheetmusicdisplay__render-block")[0];if(!c){t.classList.add("hide");continue}const a=s.getElementsByClassName("attributesAsJson")[0];if(!a||!a.innerText)continue;let d=void 0;try{d=JSON.parse(a.innerText)}catch(e){t.classList.add("hide"),l(c,"Invalid attributes provided.",e);continue}if(!d){t.classList.add("hide");continue}const p=d.musicXmlUrl;if(!p||p.length<1){t.classList.add("hide");continue}delete d.musicXmlUrl;let u=1;d.zoom&&(u=parseFloat(d.zoom),NaN!==u&&void 0!==u||(u=1),delete d.zoom);let h=0;d.aspectRatio&&(h=parseFloat(d.aspectRatio),NaN!==h&&void 0!==h||(h=0),delete d.aspectRatio);const m=()=>{let e="auto";h>0&&s.offsetWidth&&(e=(s.offsetWidth/h).toString()+"px"),s.style.height=e};m(),i.OpenSheetMusicDisplayGlobalHooks.applyFilters("phonicscore_opensheetmusicdisplay_options",void 0,d,c);const f=new o.OpenSheetMusicDisplay(c,d);i.OpenSheetMusicDisplayGlobalHooks.didAction("phonicscore_opensheetmusicdisplay_setup"),i.OpenSheetMusicDisplayGlobalHooks.applyFilters("phonicscore_opensheetmusicdisplay_setup",f,d,c);let y=0,_=!1;const b=()=>{y++,i.OpenSheetMusicDisplayGlobalHooks.applyFilters("phonicscore_opensheetmusicdisplay_load",f,d,c),f.load(p).then(()=>{i.OpenSheetMusicDisplayGlobalHooks.didAction("phonicscore_opensheetmusicdisplay_load"),f.Zoom=u;try{i.OpenSheetMusicDisplayGlobalHooks.applyFilters("phonicscore_opensheetmusicdisplay_render",f,d,c),f.render()}catch(e){console.warn(e),l(c,"Error loading sheet music file: "+p,e)}finally{i.OpenSheetMusicDisplayGlobalHooks.didAction("phonicscore_opensheetmusicdisplay_render"),t.classList.add("hide"),y=0}},(function(e){i.OpenSheetMusicDisplayGlobalHooks.didAction("phonicscore_opensheetmusicdisplay_load"),console.warn(e),y<5?(console.warn("Error loading. Attempting reload..."),b()):(l(c,"Error loading sheet music file: "+p,e),t.classList.add("hide"),y=0,_=!0)}))};b();let g=c.offsetWidth,v=void 0;const O=()=>{if(_)return;const e=g;if(g=c.offsetWidth,g===e)return;t.classList.remove("hide");const s=n(c);s&&s.remove(),clearTimeout(v),v=setTimeout(()=>{m(),f.Zoom=u;try{i.OpenSheetMusicDisplayGlobalHooks.applyFilters("phonicscore_opensheetmusicdisplay_render",f,d,c),f.render()}catch(e){console.warn(e),l(c,"Error loading sheet music file: "+p,e)}finally{i.OpenSheetMusicDisplayGlobalHooks.didAction("phonicscore_opensheetmusicdisplay_render"),t.classList.add("hide")}},500)};if(ResizeObserver){new ResizeObserver(e=>{O()}).observe(c)}else console.info("Browser doesn't support ResizeObserver, defaulting to window resize"),window.addEventListener("resize",e=>{O()})}}]);