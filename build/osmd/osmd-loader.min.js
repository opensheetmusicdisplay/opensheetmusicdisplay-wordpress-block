!function(e){var o={};function t(s){if(o[s])return o[s].exports;var i=o[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=o,t.d=function(e,o,s){t.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:s})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,o){if(1&o&&(e=t(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var i in e)t.d(s,i,function(o){return e[o]}.bind(null,i));return s},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},t.p="",t(t.s=4)}([function(e,o){e.exports=window["opensheetmusicdisplay-wordpress-block"]},,function(e,o){e.exports=opensheetmusicdisplay},,function(e,o,t){"use strict";t.r(o);var s=t(2),i=t(0);const n=document.createElement("iframe");n.style.display="none",document.body.appendChild(n);let r=void 0,l=void 0;function a(){r&&l&&(Array.prototype.reduce=r)}function c(){r&&l&&(Array.prototype.reduce=l)}function p(e){let o=void 0;for(const t of e.getElementsByTagName("div"))if(t.id.startsWith("osmdCanvas")){o=t;break}return o}function d(e,o,t){const s=p(e),i=function(e){let o=e.getElementsByClassName("phonicscore-opensheetmusicdisplay__message-block")[0];if(!o){o=document.createElement("div"),o.classList.add("phonicscore-opensheetmusicdisplay__message-block");const t=document.createElement("h4");o.appendChild(t);const s=document.createElement("p");o.appendChild(s),e.appendChild(o)}return o}(e);i.getElementsByTagName("h4")[0].innerText=o;i.getElementsByTagName("p")[0].innerText=t,s&&s.remove()}n&&n.contentWindow&&n.contentWindow.Array&&n.contentWindow.Array.prototype&&n.contentWindow.Array.prototype.reduce&&(r=n.contentWindow.Array.prototype.reduce),Array&&Array.prototype&&Array.prototype.reduce&&(l=Array.prototype.reduce),n.remove();const u=document.getElementsByClassName("phonicscore-opensheetmusicdisplay__placeholder");for(let e=0;e<u.length;e++){const o=u[e],t=o.getElementsByClassName("phonicscore-opensheetmusicdisplay__loading-spinner")[0];t.classList.remove("hide");const n=o.getElementsByClassName("phonicscore-opensheetmusicdisplay__render-block")[0];if(!n){t.classList.add("hide");continue}const r=o.getElementsByClassName("attributesAsJson")[0];if(!r||!r.innerText)continue;let l=void 0;try{l=JSON.parse(r.innerText)}catch(e){t.classList.add("hide"),d(n,"Invalid attributes provided.",e);continue}if(!l){t.classList.add("hide");continue}const h=l.musicXmlUrl;if(!h||h.length<1){t.classList.add("hide");continue}delete l.musicXmlUrl;let y=1;l.zoom&&(y=parseFloat(l.zoom),NaN!==y&&void 0!==y||(y=1),delete l.zoom);let m=0;l.aspectRatio&&(m=parseFloat(l.aspectRatio),NaN!==m&&void 0!==m||(m=0),delete l.aspectRatio),l.autoResize=!1;const f=()=>{let e="auto";m>0&&o.offsetWidth&&(e=(o.offsetWidth/m).toString()+"px"),o.style.height=e};f(),i.OpenSheetMusicDisplayGlobalHooks.applyFilters("phonicscore_opensheetmusicdisplay_options",void 0,l,n);const _=new s.OpenSheetMusicDisplay(n,l);i.OpenSheetMusicDisplayGlobalHooks.didAction("phonicscore_opensheetmusicdisplay_setup"),i.OpenSheetMusicDisplayGlobalHooks.applyFilters("phonicscore_opensheetmusicdisplay_setup",_,l,n);let b=0,v=!1,g=0;const O=()=>{b++,i.OpenSheetMusicDisplayGlobalHooks.applyFilters("phonicscore_opensheetmusicdisplay_load",_,l,n),_.load(h).then(()=>{i.OpenSheetMusicDisplayGlobalHooks.didAction("phonicscore_opensheetmusicdisplay_load"),i.OpenSheetMusicDisplayGlobalHooks.applyFilters("phonicscore_opensheetmusicdisplay_post-load",_,l,n),_.Zoom=y;try{a(),i.OpenSheetMusicDisplayGlobalHooks.applyFilters("phonicscore_opensheetmusicdisplay_render",_,l,n);let e=n.offsetWidth;_.render(),g=Math.abs(e-n.offsetWidth),c()}catch(e){console.warn(e),d(n,"Error loading sheet music file: "+h,e)}finally{i.OpenSheetMusicDisplayGlobalHooks.applyFilters("phonicscore_opensheetmusicdisplay_post-render",_,l,n),i.OpenSheetMusicDisplayGlobalHooks.didAction("phonicscore_opensheetmusicdisplay_render"),t.classList.add("hide"),b=0}},(function(e){i.OpenSheetMusicDisplayGlobalHooks.applyFilters("phonicscore_opensheetmusicdisplay_post-load",_,l,n,e),i.OpenSheetMusicDisplayGlobalHooks.didAction("phonicscore_opensheetmusicdisplay_load"),console.warn(e),b<5?(console.warn("Error loading. Attempting reload..."),O()):(d(n,"Error loading sheet music file: "+h,e),t.classList.add("hide"),b=0,v=!0)}))};O();let M=n.offsetWidth,S=void 0;const w=()=>{if(v)return;const e=M;if(M=n.offsetWidth,Math.abs(M-e)<=g)return;t.classList.remove("hide");const o=p(n);o&&o.remove(),clearTimeout(S),S=setTimeout(()=>{f(),_.Zoom=y;try{a(),i.OpenSheetMusicDisplayGlobalHooks.applyFilters("phonicscore_opensheetmusicdisplay_render",_,l,n);let e=n.offsetWidth;_.autoResize(),g=Math.abs(e-n.offsetWidth),c()}catch(e){console.warn(e),d(n,"Error loading sheet music file: "+h,e)}finally{i.OpenSheetMusicDisplayGlobalHooks.applyFilters("phonicscore_opensheetmusicdisplay_post-render",_,l,n),i.OpenSheetMusicDisplayGlobalHooks.didAction("phonicscore_opensheetmusicdisplay_render"),t.classList.add("hide")}},500)};if(ResizeObserver){new ResizeObserver(e=>{w()}).observe(n)}else console.info("Browser doesn't support ResizeObserver, defaulting to window resize"),window.addEventListener("resize",e=>{w()})}}]);