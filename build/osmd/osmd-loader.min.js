!function(e){var o={};function t(s){if(o[s])return o[s].exports;var n=o[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,t),n.l=!0,n.exports}t.m=e,t.c=o,t.d=function(e,o,s){t.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:s})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,o){if(1&o&&(e=t(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var n in e)t.d(s,n,function(o){return e[o]}.bind(null,n));return s},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},t.p="",t(t.s=3)}([function(e,o){e.exports=window["opensheetmusicdisplay-wordpress-block"]},function(e,o){e.exports=opensheetmusicdisplay},,function(e,o,t){"use strict";t.r(o);var s=t(1),n=t(0);const i=document.createElement("iframe");i.style.display="none",document.body.appendChild(i);let r=void 0,l=void 0;function c(){r&&l&&(Array.prototype.reduce=r)}function a(){r&&l&&(Array.prototype.reduce=l)}function p(e){let o=void 0;for(const t of e.getElementsByTagName("div"))if(t.id.startsWith("osmdCanvas")){o=t;break}return o}function d(e,o,t){const s=p(e),n=function(e){let o=e.getElementsByClassName("phonicscore-opensheetmusicdisplay__message-block")[0];if(!o){o=document.createElement("div"),o.classList.add("phonicscore-opensheetmusicdisplay__message-block");const t=document.createElement("h4");o.appendChild(t);const s=document.createElement("p");o.appendChild(s),e.appendChild(o)}return o}(e);n.getElementsByTagName("h4")[0].innerText=o;n.getElementsByTagName("p")[0].innerText=t,s&&s.remove()}i&&i.contentWindow&&i.contentWindow.Array&&i.contentWindow.Array.prototype&&i.contentWindow.Array.prototype.reduce&&(r=i.contentWindow.Array.prototype.reduce),Array&&Array.prototype&&Array.prototype.reduce&&(l=Array.prototype.reduce),i.remove();const u=document.getElementsByClassName("phonicscore-opensheetmusicdisplay__placeholder");for(let e=0;e<u.length;e++){const o=u[e],t=o.getElementsByClassName("phonicscore-opensheetmusicdisplay__loading-spinner")[0];t.classList.remove("hide");const i=o.getElementsByClassName("phonicscore-opensheetmusicdisplay__render-block")[0];if(!i){t.classList.add("hide");continue}const r=o.getElementsByClassName("attributesAsJson")[0];if(!r||!r.innerText)continue;let l=void 0;try{l=JSON.parse(r.innerText)}catch(e){t.classList.add("hide"),d(i,"Invalid attributes provided.",e);continue}if(!l){t.classList.add("hide");continue}const y=l.musicXmlUrl;if(!y||y.length<1){t.classList.add("hide");continue}delete l.musicXmlUrl;let h=1;l.zoom&&(h=parseFloat(l.zoom),NaN!==h&&void 0!==h||(h=1),delete l.zoom);let m=0;l.aspectRatio&&(m=parseFloat(l.aspectRatio),NaN!==m&&void 0!==m||(m=0),delete l.aspectRatio);const f=()=>{let e="auto";m>0&&o.offsetWidth&&(e=(o.offsetWidth/m).toString()+"px"),o.style.height=e};f(),n.OpenSheetMusicDisplayGlobalHooks.applyFilters("phonicscore_opensheetmusicdisplay_options",void 0,l,i);const _=new s.OpenSheetMusicDisplay(i,l);n.OpenSheetMusicDisplayGlobalHooks.didAction("phonicscore_opensheetmusicdisplay_setup"),n.OpenSheetMusicDisplayGlobalHooks.applyFilters("phonicscore_opensheetmusicdisplay_setup",_,l,i);let b=0,v=!1;const g=()=>{b++,n.OpenSheetMusicDisplayGlobalHooks.applyFilters("phonicscore_opensheetmusicdisplay_load",_,l,i),_.load(y).then(()=>{n.OpenSheetMusicDisplayGlobalHooks.didAction("phonicscore_opensheetmusicdisplay_load"),n.OpenSheetMusicDisplayGlobalHooks.applyFilters("phonicscore_opensheetmusicdisplay_post-load",_,l,i),_.Zoom=h;try{c(),n.OpenSheetMusicDisplayGlobalHooks.applyFilters("phonicscore_opensheetmusicdisplay_render",_,l,i),_.render(),a()}catch(e){console.trace(e),d(i,"Error loading sheet music file: "+y,e)}finally{n.OpenSheetMusicDisplayGlobalHooks.didAction("phonicscore_opensheetmusicdisplay_render"),t.classList.add("hide"),b=0}},(function(e){n.OpenSheetMusicDisplayGlobalHooks.applyFilters("phonicscore_opensheetmusicdisplay_post-load",_,l,i,e),n.OpenSheetMusicDisplayGlobalHooks.didAction("phonicscore_opensheetmusicdisplay_load"),console.warn(e),b<5?(console.warn("Error loading. Attempting reload..."),g()):(d(i,"Error loading sheet music file: "+y,e),t.classList.add("hide"),b=0,v=!0)}))};g();let O=i.offsetWidth,S=void 0;const w=()=>{if(v)return;const e=O;if(O=i.offsetWidth,O===e)return;t.classList.remove("hide");const o=p(i);o&&o.remove(),clearTimeout(S),S=setTimeout(()=>{f(),_.Zoom=h;try{c(),n.OpenSheetMusicDisplayGlobalHooks.applyFilters("phonicscore_opensheetmusicdisplay_render",_,l,i),_.render(),a()}catch(e){console.trace(e),d(i,"Error loading sheet music file: "+y,e)}finally{n.OpenSheetMusicDisplayGlobalHooks.didAction("phonicscore_opensheetmusicdisplay_render"),t.classList.add("hide")}},500)};if(ResizeObserver){new ResizeObserver(e=>{w()}).observe(i)}else console.info("Browser doesn't support ResizeObserver, defaulting to window resize"),window.addEventListener("resize",e=>{w()})}}]);