!function(e){var t={};function o(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=2)}([function(e,t){e.exports=opensheetmusicdisplay},,function(e,t,o){"use strict";o.r(t);var n=o(0);o(3);function s(e){let t=void 0;for(const o of e.getElementsByTagName("div"))if(o.id.startsWith("osmdCanvas")){t=o;break}return t}function i(e,t,o){const n=s(e),i=function(e){let t=e.getElementsByClassName("phonicscore-opensheetmusicdisplay__message-block")[0];if(!t){t=document.createElement("div"),t.classList.add("phonicscore-opensheetmusicdisplay__message-block");const o=document.createElement("h4");t.appendChild(o);const n=document.createElement("p");t.appendChild(n),e.appendChild(t)}return t}(e);i.getElementsByTagName("h4")[0].innerText=t;i.getElementsByTagName("p")[0].innerText=o,n&&n.remove()}const r=document.getElementsByClassName("phonicscore-opensheetmusicdisplay__placeholder");console.log("0",r);for(let e=0;e<r.length;e++){const t=r[e];console.log("1");const o=t.getElementsByClassName("phonicscore-opensheetmusicdisplay__loading-spinner")[0];o.classList.remove("hide");const l=t.getElementsByClassName("phonicscore-opensheetmusicdisplay__render-block")[0];if(!l){o.classList.add("hide");continue}console.log("2");const c=t.getElementsByClassName("attributesAsJson")[0];if(!c||!c.innerText)continue;console.log("3");let a=void 0;try{a=JSON.parse(c.innerText)}catch(e){o.classList.add("hide"),i(l,"Invalid attributes provided.",e);continue}if(console.log("4"),!a){o.classList.add("hide");continue}console.log("5");const d=a.musicXmlUrl;if(!d||d.length<1){o.classList.add("hide");continue}console.log("6"),delete a.musicXmlUrl;let u=1;a.zoom&&(u=parseFloat(a.zoom),NaN!==u&&void 0!==u||(u=1),delete a.zoom);let p=0;a.aspectRatio&&(p=parseFloat(a.aspectRatio),NaN!==p&&void 0!==p||(p=0),delete a.aspectRatio);const f=()=>{let e="auto";p>0&&t.offsetWidth&&(e=(t.offsetWidth/p).toString()+"px"),t.style.height=e};f();const m=new n.OpenSheetMusicDisplay(l,a);let h=0,g=!1;const y=()=>{h++,m.load(d).then(()=>{m.Zoom=u;try{m.render()}catch(e){console.warn(e),i(l,"Error loading sheet music file: "+d,e)}finally{o.classList.add("hide"),h=0}},(function(e){console.warn(e),h<5?(console.warn("Error loading. Attempting reload..."),y()):(i(l,"Error loading sheet music file: "+d,e),o.classList.add("hide"),h=0,g=!0)}))};y();let v=l.offsetWidth;console.log("7");let b=void 0;const E=()=>{if(g)return;const e=v;if(v=l.offsetWidth,v===e)return;o.classList.remove("hide");const t=s(l);t&&t.remove(),clearTimeout(b),b=setTimeout(()=>{f(),m.Zoom=u;try{m.render()}catch(e){console.warn(e),i(l,"Error loading sheet music file: "+d,e)}finally{o.classList.add("hide")}},500)};if(ResizeObserver){new ResizeObserver(e=>{E()}).observe(l)}else console.info("Browser doesn't support ResizeObserver, defaulting to window resize"),window.addEventListener("resize",e=>{E()})}},function(e,t){e.exports=window["opensheetmusicdisplay-wordpress-block"]}]);